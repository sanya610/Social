class ChatEngine{constructor(e,s,n){this.chatBox=$("#"+s),this.userEmail=n,this.friendId=e,this.socket=io.connect("http://54.198.186.255:5000"),this.userEmail&&this.connectionHandler()}connectionHandler(){let e=this;this.socket.on("connect",(function(){console.log("connection established using sockets...!"),e.socket.emit("join_room",{user_email:e.userEmail,chatroom:e.friendId}),e.socket.on("user_joined",(function(s){console.log("a user joined!",s);let n=e.userEmail+"  joined the chat";""!=n&&e.socket.emit("send_message",{message:n,user_email:e.userEmail,chatroom:e.friendId})}))})),$("#send-message").click((function(){let s=$("#chat-message-input").val();$("#chat-message-input").val(""),""!=s&&e.socket.emit("send_message",{message:s,user_email:e.userEmail,chatroom:e.friendId})})),e.socket.on("receive_message",(function(s){console.log("message received",s.message);let n=$("<li>"),t="other-message";s.user_email==e.userEmail&&(t="self-message"),n.append($("<span>",{html:s.message})),n.append($("<sub>",{html:"<br>"+s.user_email})),n.addClass(t),$("#chat-messages-list").append(n)}))}}(function(){let e=$(".chat-button");console.log(e.length),console.log(e.attr("href")),e.click((function(e){e.preventDefault(),$.ajax({type:"get",url:$(this).attr("href"),success:function(e){console.log(e),$("#hello_everyone").html(`\n                    <div id="${e.data.friend._id}">\n                      <div id="user-chat-box">\n\n                         <div id="friend-name" > \n                            Click on friends name to chat\n                         </div>\n\n                        <ul id="chat-messages-list">\n                            <li class="other-message">\n                              <span>Other Message</span>\n                            </li>\n\n                            <li class="self-message">\n                               <span>\n                                   Self Message\n                               </span>    \n                            </li>\n                        </ul>\n\n                        <div id="chat-message-input-container">\n                           <input id="chat-message-input" placeholder="Type message here">\n                           <button id="send-message">Send</button>\n                        </div>\n                     </div> \n                    </div>`),new ChatEngine(e.data.friend._id,"user-chat-box",e.data.myid),$("#friend-name").text(""+e.data.friendName),new Noty({theme:"relax",text:"Entered the chat room",type:"success",layout:"topRight",timeout:1500}).show()},error:function(e){console.log(e)}})}))})();